(function(t){function e(e){for(var a,i,o=e[0],c=e[1],u=e[2],l=0,f=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&f.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],a=!0,o=1;o<s.length;o++){var c=s[o];0!==n[c]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},n={app:0},r=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var d=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0b8c":function(t,e,s){"use strict";var a=s("d880"),n=s.n(a);n.a},2586:function(t,e,s){"use strict";var a=s("38b4"),n=s.n(a);n.a},2964:function(t,e,s){"use strict";var a=s("a640"),n=s.n(a);n.a},"38b4":function(t,e,s){},"3c56":function(t,e,s){},"4c5c":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-view")},r=[],i=(s("5c0b"),s("2877")),o={},c=Object(i["a"])(o,n,r,!1,null,null,null),u=c.exports,d=s("8c4f"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("header",[s("topbar",{attrs:{round:t.round,roundProgress:t.roundProgress,timer:t.timer}})],1),s("container",[s("statuses"),s("scoreboard",{attrs:{updateRound:t.updateRound,updateRoundTime:t.updateRoundTime,updateRoundStart:t.updateRoundStart,timer:t.timer}})],1),t._m(0)],1)},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("footer",{staticClass:"footer"},[t._v(" Scoreboard adapted from the "),s("a",{attrs:{href:"https://github.com/pomo-mondreganto/ForcAD"}},[t._v("ForcAD")]),t._v(" project by "),s("span",{staticClass:"team"},[t._v("C4T BuT S4D")]),t._v(" CTF team ")])}],v=(s("0d03"),s("4795"),s("96cf"),s("1da1")),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t._t("default")],2)},m=[],h=(s("989d"),{}),_=Object(i["a"])(h,p,m,!1,null,"2788e5c9",null),b=_.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"topbar"},[s("div",{staticClass:"progress-bar",style:{width:t.roundProgressInteger}}),s("div",{staticClass:"tp"},[t._v("Round: "+t._s(t.round))])])},g=[],k=(s("a9e3"),{props:{round:Number,timer:Number,roundProgress:Number},computed:{roundProgressInteger:function(){return"".concat(Math.floor(100*this.roundProgress),"%")}},methods:{go:function(){clearInterval(this.timer)}}}),S=k,y=(s("e563"),Object(i["a"])(S,C,g,!1,null,"7d32cf86",null)),w=y.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return null!==t.error?s("div",[t._v(t._s(t.error))]):null!==t.teams?s("div",{staticClass:"table"},[s("div",{staticClass:"row"},[s("div",{staticClass:"number"},[t._v("#")]),s("div",{staticClass:"team"},[t._v("team")]),s("div",{staticClass:"score"},[t._v("score")]),s("div",{staticClass:"service-name"},t._l(t.tasks,(function(e){var a=e.name;return s("div",{key:a,staticClass:"service-cell"},[t._v(" "+t._s(a)+" ")])})),0)]),s("transition-group",{attrs:{name:"teams-list"}},t._l(t.teams,(function(e,a){var n=e.name,r=e.score,i=e.tasks,o=e.ip,c=e.id,u=e.highlighted;return s("div",{key:n,staticClass:"row",class:["top-"+(a+1),u?"highlighted":""]},[s("div",{staticClass:"number",class:["top-"+(a+1),a>2?"default-team":"",u?"pd-3-left":"",u?"pd-3-topbottom":""]},[t._v(" "+t._s(a+1)+" ")]),s("div",{staticClass:"team team-row",class:["top-"+(a+1),a>2?"default-team":"",u?"pd-3-topbottom":""],on:{click:function(e){return t.openTeam(c)}}},[s("div",{staticClass:"team-name"},[t._v(t._s(n))]),s("div",{staticClass:"ip"},[t._v(t._s(o))])]),s("div",{staticClass:"score",class:["top-"+(a+1),a>2?"default-team":"",u?"pd-3-topbottom":""]},[t._v(" "+t._s(r.toFixed(2))+" ")]),s("div",{staticClass:"service"},t._l(i,(function(e){var a=e.id,n=e.sla,r=e.attack,o=e.defense,c=e.message,u=e.status;return s("div",{key:a,staticClass:"service-cell",class:"status-"+u,style:{"font-size":1-i.length/20+"em"}},[s("button",{staticClass:"info"},[s("i",{staticClass:"fas fa-info-circle"}),s("span",{staticClass:"tooltip"},[t._v(t._s(""===c?"OK":c))])]),s("div",{staticClass:"sla"},[s("i",{staticClass:"fas fa-tachometer-alt"}),t._v(" "+t._s(n.toFixed(2))+" ")]),s("div",{staticClass:"attack"},[s("i",{staticClass:"fas fa-flag"}),t._v(" "+t._s(r.toFixed(2))+" ")]),s("div",{staticClass:"defense"},[s("i",{staticClass:"fas fa-shield-alt"}),t._v(" -"+t._s(o.toFixed(2))+" ")])])})),0)])})),0)],1):t._e()},T=[],R=(s("4160"),s("d81d"),s("4e82"),s("d3b7"),s("159b"),"");R=window.location.origin;var O=R,P=[101,102,103,104,110,111],I={101:"UP",102:"RECOVERING",103:"MUMBLE",104:"DOWN",110:"CHECK FAILED",111:"INACTIVE","-1":"OFFLINE"},E=(s("b0c0"),s("d4ec")),j=s("bee2"),F=function(){function t(e){var s=e.ServiceName,a=e.ServiceId,n=e.MaxStores,r=e.FirstBloods;Object(E["a"])(this,t),this.name=s,this.id=a,this.stores=n,this.firstBloods=r}return Object(j["a"])(t,null,[{key:"comp",value:function(t,e){return t.id-e.id}}]),t}(),$=F,N=(s("a4d3"),s("e01a"),s("d28b"),s("caad"),s("2532"),s("3ca3"),s("ddb0"),function(){function t(e){var s=e.ServiceId,a=e.ServiceStatus,n=e.ServiceLevelAgreementPoints,r=e.AttackPoints,i=e.LostDefensePoints,o=e.Message;Object(E["a"])(this,t),this.id=s+100*n+1e4*r+1e6*i,this.taskId=s,this.status="INACTIVE"===a?111:"OK"===a?101:"RECOVERING"===a?102:"MUMBLE"===a?103:"OFFLINE"===a?104:110,this.sla=n,this.attack=r,this.defense=i,this.message=o}return Object(j["a"])(t,null,[{key:"comp",value:function(t,e){return t.taskId-e.taskId}}]),t}()),M=N,D=function(){function t(e,s){Object(E["a"])(this,t);var a=e.Name,n=e.TeamId;this.name=a,this.id=n,this.ip="team"+n+".enowars.com",this.taskModels=s,this.update(e)}return Object(j["a"])(t,[{key:"update",value:function(t){if(t.TeamId==this.id){this.score=t.TotalPoints,this.attack=t.AttackPoints,this.defense=t.LostDefensePoints,this.sla=t.ServiceLevelAgreementPoints,this.tasks=t.ServiceDetails.map((function(t){return new M(t)}));var e=this.tasks.map((function(t){return t.taskId})),s=!0,a=!1,n=void 0;try{for(var r,i=this.taskModels[Symbol.iterator]();!(s=(r=i.next()).done);s=!0){var o=r.value;e.includes(o.id)||this.tasks.push(new M({ServiceId:o.id,ServiceLevelAgreementPoints:0,AttackPoints:0,LostDefensePoints:0,message:""}))}}catch(c){a=!0,n=c}finally{try{s||null==i["return"]||i["return"]()}finally{if(a)throw n}}this.tasks.sort(M.comp)}}}],[{key:"comp",value:function(t,e){return e.score-t.score}}]),t}(),A=D,L=s("bc3a"),B=s.n(L),K={props:{updateRound:Function,updateRoundTime:Function,updateRoundStart:Function,timer:Number},data:function(){return{error:null,server:null,tasks:null,teams:null,round_start:0}},methods:{openTeam:function(t){clearInterval(this.timer),this.$router.push({name:"team",params:{id:t}})["catch"]((function(){}))}},created:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(){var e,s,a,n,r,i,o,c,u,d,l,f,v=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=15;break}return t.prev=1,t.next=4,B.a.get("".concat(O,"/api/scoreboard"));case 4:return e=t.sent,t.abrupt("break",15);case 8:return t.prev=8,t.t0=t["catch"](1),console.log("Failed to fetch scoreboard: "+t.t0),t.next=13,new Promise((function(t){return setTimeout(t,2e3)}));case 13:t.next=0;break;case 15:s=e.data,a=s.CurrentRound,n=s.StartTimeEpoch,r=s.EndTimeEpoch,i=s.Services,o=s.Teams,this.updateRoundStart(r),this.updateRoundTime(r-n),this.updateRound(a),this.tasks=i.map((function(t){return new $(t)})).sort($.comp),this.teams=o.map((function(t){return new A(t,v.tasks)})).sort(A.comp);case 21:if(!this.teams){t.next=41;break}return t.prev=22,t.next=25,B.a.get("".concat(O,"/api/scoreboard/live"));case 25:e=t.sent,c=e.data,u=c.CurrentRound,d=c.StartTimeEpoch,l=c.EndTimeEpoch,c.Services,f=c.Teams,this.updateRoundStart(l),this.updateRoundTime(l-d),this.updateRound(u),f.forEach((function(t){v.teams.forEach((function(e){e.update(t)}))})),this.teams=this.teams.sort(A.comp),t.next=39;break;case 34:return t.prev=34,t.t1=t["catch"](22),console.log("Failed to fetch scoreboard: "+t.t1),t.next=39,new Promise((function(t){return setTimeout(t,2e3)}));case 39:t.next=21;break;case 41:case"end":return t.stop()}}),t,this,[[1,8],[22,34]])})));function e(){return t.apply(this,arguments)}return e}()},V=K,U=(s("2964"),Object(i["a"])(V,x,T,!1,null,"672524b0",null)),z=U.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"statuses"},t._l(t.statuses,(function(e){return s("div",{key:e,staticClass:"status-cell",class:"status-"+e},[t._v(" "+t._s(t.statusesNames[e])+" ")])})),0)},J=[],H={data:function(){return{statuses:P,statusesNames:I}}},W=H,q=(s("2586"),Object(i["a"])(W,G,J,!1,null,"4069afa5",null)),Q=q.exports,X={components:{Container:b,Topbar:w,Scoreboard:z,Statuses:Q},data:function(){return{round:0,roundStart:0,timer:null,roundTime:null,roundProgress:null}},created:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.timer=setInterval(this.tick,500);case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{updateRound:function(t){this.round=t},updateRoundTime:function(t){this.roundTime=t},updateRoundStart:function(t){this.roundStart=t},tick:function(){null===this.roundTime||null===this.roundStart||this.round<1?this.roundProgress=0:(this.roundProgress=((new Date).getTime()/1e3-this.roundStart)/this.roundTime,this.roundProgress=Math.min(this.roundProgress,1))}}},Y=X,Z=(s("8ec6"),Object(i["a"])(Y,l,f,!1,null,"60b97536",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("header",[s("topbar",{attrs:{round:t.round}})],1),s("container",[s("statuses"),s("team-scoreboard",{attrs:{updateRound:t.updateRound}})],1),t._m(0)],1)},st=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("footer",{staticClass:"footer"},[t._v(" Powered by "),s("span",{staticClass:"team"},[t._v("C4T BuT S4D")]),t._v(" CTF team ")])}],at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return null!==t.error?s("div",[t._v(" "+t._s(t.error)+" ")]):null!==t.team?s("div",{staticClass:"table"},[s("div",{staticClass:"row"},[s("div",{staticClass:"number"},[t._v("#")]),s("div",{staticClass:"team"},[t._v("team")]),s("div",{staticClass:"score"},[t._v("score")]),s("div",{staticClass:"service-name"},t._l(t.tasks,(function(e){var a=e.name;return s("div",{key:a,staticClass:"service-cell"},[t._v(" "+t._s(a)+" ")])})),0)]),s("div",t._l(t.states,(function(e,a){return s("div",{key:a,staticClass:"row"},[s("div",{staticClass:"number"},[t._v(" "+t._s(e.round)+" ")]),s("div",{staticClass:"team"},[s("div",{staticClass:"team-name"},[t._v(t._s(t.team.name))]),s("div",{staticClass:"ip"},[t._v(t._s(t.team.ip))])]),s("div",{staticClass:"score"},[t._v(" "+t._s(e.score.toFixed(2))+" ")]),s("div",{staticClass:"service"},t._l(e.tasks,(function(e){var a=e.id,n=e.sla,r=e.attack,i=e.defense,o=e.message,c=e.status;return s("div",{key:a,staticClass:"service-cell",class:"status-"+c,style:{"font-size":1-t.tasks.length/20+"em"}},[s("button",{staticClass:"info"},[s("i",{staticClass:"fas fa-info-circle"}),s("span",{staticClass:"tooltip"},[t._v(t._s(""===o?"OK":o))])]),s("div",{staticClass:"sla"},[s("i",{staticClass:"fas fa-tachometer-alt"}),t._v(" "+t._s(n.toFixed(2))+" ")]),s("div",{staticClass:"attack"},[s("i",{staticClass:"fas fa-flag"}),t._v(" "+t._s(r.toFixed(2))+" ")]),s("div",{staticClass:"defense"},[s("i",{staticClass:"fas fa-shield-alt"}),t._v(" -"+t._s(i.toFixed(2))+" ")])])})),0)])})),0)]):t._e()},nt=[],rt=(s("99af"),s("4de4"),s("13d5"),{props:{updateRound:Function,updateRoundStart:Function},data:function(){return{error:null,team:null,teamId:null,tasks:null,round:0,by_task:[]}},created:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(){var e,s,a,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.teamId=this.$route.params.id,t.prev=1,t.next=4,this.$http.get("".concat(O,"/api/scoreboard"));case 4:return e=t.sent,s=e.data,t.next=8,this.$http.get("".concat(O,"/api/teams/").concat(this.teamId));case 8:a=t.sent,n=a.data,this.team=new A(s.Teams.filter((function(t){var e=t.TeamId;return e==r.teamId}))[0],[]),this.tasks=s.Services.sort((function(t,e){var s=t.ServiceId,a=e.ServiceId;return s-a})).map((function(t){return{name:t.ServiceName}})),this.round=n.reduce((function(t,e){var s=e.Round;return Math.max(t,s)}),0),this.updateRound(this.round),n=n.map((function(t){return{round:t.Round,score:t.TotalPoints,tasks:t.ServiceDetails.map((function(t){return new M(t)})).sort((function(t,e){var s=t.ServiceId,a=e.ServiceId;return a-s}))}})),this.states=n.sort((function(t,e){var s=t.round,a=e.round;return a-s})),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](1),console.log(t.t0),this.error="Can't connect to server";case 22:case"end":return t.stop()}}),t,this,[[1,18]])})));function e(){return t.apply(this,arguments)}return e}()}),it=rt,ot=(s("0b8c"),Object(i["a"])(it,at,nt,!1,null,"042137d4",null)),ct=ot.exports,ut={components:{Container:b,Topbar:w,TeamScoreboard:ct,Statuses:Q},data:function(){return{round:0}},methods:{updateRound:function(t){this.round=t}}},dt=ut,lt=(s("d2fd"),Object(i["a"])(dt,et,st,!1,null,"bd6848d8",null)),ft=lt.exports;a["a"].use(d["a"]);var vt=[{path:"/",name:"index",component:tt},{path:"/team/:id/",name:"team",component:ft}],pt=new d["a"]({mode:"history",base:"/",routes:vt}),mt=pt;a["a"].config.productionTip=!1,B.a.defaults.withCredentials=!0,a["a"].prototype.$http=B.a,mt.$http=B.a,new a["a"]({router:mt,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";var a=s("9c0c"),n=s.n(a);n.a},"8ec6":function(t,e,s){"use strict";var a=s("3c56"),n=s.n(a);n.a},"989d":function(t,e,s){"use strict";var a=s("d3e3"),n=s.n(a);n.a},"9c0c":function(t,e,s){},a640:function(t,e,s){},d2fd:function(t,e,s){"use strict";var a=s("4c5c"),n=s.n(a);n.a},d32f:function(t,e,s){},d3e3:function(t,e,s){},d880:function(t,e,s){},e563:function(t,e,s){"use strict";var a=s("d32f"),n=s.n(a);n.a}});
//# sourceMappingURL=app.dbcfaf60.js.map